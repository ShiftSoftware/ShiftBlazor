@namespace ShiftSoftware.ShiftBlazor.Components
@using System.Net.Http.Json
@inject HttpClient httpClient
@typeparam T where T : ShiftEntityDTOBase, new()

<MudDataGrid Items="@Elements.Take(4)"
             MultiSelection="EnableSelection"
             Hideable="true"
             SortMode="SortMode.Multiple"
             Dense
             Filterable="true">
    <Columns>

        
        @if (EnableSelection) {
            <SelectColumn T="T" />
        }
        <PropertyColumn Property="x => x.ID" />

        @foreach (var column in GeneratedColumns)
        {
            <TemplateColumn T="T" Title="@column.Label" ShowColumnOptions="true">
                <CellTemplate>
                    @context.Item.GetType().GetProperty(column.Field)?.GetValue(context.Item)
                </CellTemplate>

            </TemplateColumn>
        }

        @if (!ExcludedColumns.Contains("Actions", StringComparer.CurrentCultureIgnoreCase) && ComponentType != null)
        {
            <TemplateColumn Sortable="false" Filterable="false" Title="Actions">
                <CellTemplate>
                    <MudButton OnClick="@(() => ViewAddItem(context.Item.ID))"
                                Variant="@Variant.Outlined"
                                EndIcon="@Icons.Material.Filled.OpenInNew"
                                Color="@Color.Primary"
                                Size="@Size.Small">
                        @Loc["ViewButton"]
                    </MudButton>
                </CellTemplate>
            </TemplateColumn>
        }
    </Columns>
</MudDataGrid>

@code {
    private IEnumerable<T> Elements = new List<T>();
}